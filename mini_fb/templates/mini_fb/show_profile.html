{% extends 'mini_fb/base.html' %}

{% block content %}
<div class="profile-container">
  <h2>{{ profile.first_name }} {{ profile.last_name }}'s Profile</h2>

  <table class="profile-table">
    <tr>
      <td><strong>First Name:</strong></td>
      <td>{{ profile.first_name }}</td>
    </tr>
    <tr>
      <td><strong>Last Name:</strong></td>
      <td>{{ profile.last_name }}</td>
    </tr>
    <tr>
      <td><strong>City:</strong></td>
      <td>{{ profile.city }}</td>
    </tr>
    <tr>
      <td><strong>Email:</strong></td>
      <td>{{ profile.email }}</td>
    </tr>
    <tr>
      <td><strong>Profile Image:</strong></td>
      <td>
        <img src="{{ profile.profile_image_url }}" alt="{{ profile.first_name }}'s Profile Picture" width="200">
      </td>
    </tr>
  </table>

  <div class="status-messages-section">
    <h3>Status Messages</h3>
    <div class="status-message-container">
      {% for status in profile.get_status_messages %}
      <div class="status-message">
        <strong>{{ status.timestamp }}</strong><br>
        <p>{{ status.message }}</p>
        
        <!-- Display images if they exist -->
        {% for img in status.get_images %}
        <img src="{{ img.image_file.url }}" alt="Image for status" class="status-image">
        {% endfor %}

        <!-- Links for updating and deleting the status message -->
        <div class="status-message-buttons">
          <a href="{% url 'update_status' status.pk %}" class="action-link">Update</a>
          <a href="{% url 'delete_status' status.pk %}" class="action-link">Delete</a>
        </div>
      </div>
      {% empty %}
      <p>No status messages available.</p>
      {% endfor %}
    </div>
  </div>

  <!-- Friends Section -->
  <div class="friends-section">
    <h3>Friends</h3>
    <ul>
      {% for friend in profile.get_friends %}
      <li>
        <a href="{% url 'show_profile' friend.pk %}" class="friend-profile">
          <img src="{{ friend.profile_image_url }}" alt="{{ friend.first_name }}'s Profile Picture" class="friend-image">
          <span>{{ friend.first_name }} {{ friend.last_name }}</span>
        </a>
      </li>
      {% empty %}
      <li>This profile has no friends yet.</li>
      {% endfor %}
    </ul>
  </div>

  <div class="action-links">
    <a href="{% url 'create_status' profile.pk %}" class="action-button">Post a New Status</a>
    <a href="{% url 'friend_suggestions' profile.pk %}" class="action-button">Friend Suggestions</a>
    <a href="{% url 'show_all_profiles' %}" class="action-button">Back to All Profiles</a>
    <a href="{% url 'update_profile' profile.pk %}" class="action-button">Update Profile</a>
    <a href="{% url 'news_feed' profile.pk %}" class="action-button">View News Feed</a>

  </div>
</div>
{% endblock %}
